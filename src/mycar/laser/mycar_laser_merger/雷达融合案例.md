## 1.功能包简介
在ROS2中，提供了ira_laser_tools功能包，这个功能包下提供了两个节点：

- laserscan_multi_merger
- laserscan_virtualizer
这两个节点是处理激光雷达数据的工具，通过这两个工具，调用者可以订阅多个激光扫描源并将它们合并到同一个扫描中，或者也可以从点云中生成虚拟的激光扫描。

二者都使用了ROS中的pointcloud_to_laserscan的部分代码。laserscan_multi_merger可以轻松地、动态地将多个相同时间、单一扫描面的激光数据扫描合并成一个。这对于在具有多个单线激光雷达的车辆上使用只需要一个激光扫描作为输入的应用程序是十分有用的。Laserscan_virtualizer则可以轻松地、动态地从一个点云中生成虚拟激光扫描，例如将多线激光雷达生成的点云数据转换成单线激光雷达数据。

ira_laser_tools功能包依赖于pcl点云库，需要调用如下指令安装：
```
sudo apt install ros-${ROS_DISTRO}-pcl-ros
```
支持ROS2的ira_laser_tools功能包，可以从github下载，指令如下：
```
git clone https://github.com/nakai-omer/ira_laser_tools.git -b ${ROS_DISTRO}
```
然后构建功能包。

## 2.节点说明
本节主要介绍laserscan_multi_merger节点的使用。接下来我们简单了解一下该节点订阅的话题、发布的话题以及所需参数。

### （1）.订阅的话题
多扫描源发布扫描数据（ sensor_msgs/msg/LaserScan）的话题（有多个，可以通过参数设置）。

### （2）.发布的话题
merged_cloud（ sensor_msgs/msg/PointCloud2）

- 发布的点云数据（可通过参数设置话题名称）

scan_multi（sensor_msgs/msg/LaserScan）

- 合并后的扫描数据（可通过参数设置话题名称）

### （3）.所需参数
destination_frame

- 雷达融合后参考的坐标系（默认"cart_frame"）

cloud_destination_topic

- 发布点云数据的话题（默认"/merged_cloud"）

scan_destination_topic

- 发布扫描数据的话题（默认"/scan_multi"）

laserscan_topics

- 订阅的扫描数据话题列表

angle_min

- 扫描起始角度[以弧度为单位]（默认 -3.14）

angle_max

- 扫描结束角度[以弧度为单位]（默认 3.14）

angle_increment

- 相邻两条射线之间的角距离[以弧度为单位]（默认 0.0058）

scan_time

- 扫描（以激光发射时间为依据）间隔时间[以秒为单位]（默认 0.0）

range_min

- 最小测量距离[以米为单位]（默认 0.0）

range_max

- 最大测量距离[以米为单位]（默认 25.0）